import java.util.Scanner;

public class Loja {
	
	private Produto[] estoque;
	private int quantidadeDeProdutos;
	private String repetir;
	private Scanner scanner;
	private double totalSold;
	
	public Loja() {
		estoque = new Produto[10];
		quantidadeDeProdutos = 0;
		repetir = "Não";
		scanner = new Scanner(System.in);
		totalSold = 0;
		
	}
	
	
	private Produto[] copyForNewArray(Produto[] newArray){
		
			for(int i = 0; i < estoque.length; i++){
			
				newArray[i] = estoque[i];
			
			}
			
			return newArray;
		
	}
	
	private int searchProduct(String product) {
		
		for(int i = 0; i < quantidadeDeProdutos; i++){
			
			if(estoque[i].getNome().equals(product)){
				return i+1;
			}
			
		}
		
		return 0;
		
	}
	
	public void cadastra() {
		
		System.out.println("= = = = Cadastro de Produtos = = = = ");
		
		do {
			
		if (quantidadeDeProdutos == estoque.length) { 
			     Produto[] newArray = new Produto[quantidadeDeProdutos + 5];
			     estoque = copyForNewArray(newArray);
			}
		
		System.out.print("Digite o nome do produto: ");
		String nome = scanner.nextLine();
				
		System.out.print("Digite o preco unitario do produto: ");
		double preco = scanner.nextDouble();
		scanner.nextLine();
		
		System.out.print("Digite o tipo do produto: ");
		String tipo = scanner.nextLine();
		
		System.out.println("\n" + nome + "cadastrado com sucesso.\n");
		
		System.out.print("Deseja cadastrar outro produto? ​");
		repetir = scanner.nextLine();
		System.out.println("");
		
		estoque[quantidadeDeProdutos++] = new Produto(nome, preco, tipo);
		
		} while(!repetir.equals("Não"));
		
	}
	
	public void venda() {
		
		int productId;
		int desiredQtd;
		String repeat;
		repeat = "Não";
		
		System.out.print("==== Venda de Produtos ====");
		
		
		do{
			
		System.out.print("\nDigite o nome do produto: ");
		String searchName = scanner.nextLine();
		productId = searchProduct(searchName);
		
		if(productId != 0){
			
			System.out.println("==> " + estoque[productId - 1]);
			
			System.out.print("Digite a quantidade que deseja vender: ");
			desiredQtd = scanner.nextInt();
			scanner.nextLine();
			
			totalSold = totalSold + estoque[productId -1].getPreco() * desiredQtd;
				
			
			
		}else{
			
			System.out.println(searchName + "não cadatrada no sistema");
						
		}
		
		System.out.print("Deseja vender outro produto? ");
		repeat = scanner.nextLine();
		
		
		}while(!repeat.equals("Não"));
		
	}
	
	public void balanco(){
		
		System.out.println("= = = = Impressao de Balanco = = = =\nProdutos cadastrados:");
		
		
		for(int i = 0; i < quantidadeDeProdutos; i++){
			
			System.out.println("   " + (i+1) + ") " + estoque[i]);
			
		} 
		
		System.out.println("Total arrecadado em vendas: R$ " + totalSold);
	}
	
	

	
}
